FROM alpine:latest

ENV REDIS_ADDRESS=redis:6379
ENV REDIS_DB=0
ENV REDIS_STREAM_GROUP=booking_group

ENV MONGO_DB_URL=mongo:27017
ENV MONGO_DB_NAME=booking
ENV BOOKING_COLL=booking
ENV POLI_COLL=poli
ENV BRANCH_COLL=branch
ENV ANTRIAN_COLL=antrian
ENV SCHEDULE_COLL=schedule

ENV MONGO_EVENTSTORE_URL=mongo:27017
ENV MONGO_EVENTSTORE_NAME=eventstore
ENV MONGO_EVENTSTORE_COLLECTION=eventstore

ENV BOOKING_CHANNEL=booking_channel
ENV POLI_CHANNEL=poli_channel
ENV ANTRIAN_CHANNEL=antrian_channel
ENV BRANCH_CHANNEL=tenant_channel

EXPOSE 3210
EXPOSE 9000

ADD main main

ENTRYPOINT [ "/main" ]